// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  name String
  login String @unique
  email String  
  password String
  token String?
  fullAccess Boolean @default(false)
  houses Boolean @default(false)
  subscribers Boolean @default(false)
  accounting Boolean @default(false)
  documents Boolean @default(false)
  counters Boolean @default(false)
  oneOffJobs Boolean @default(false)
  settings Boolean @default(false)
}

model GeneralSettings {
   id Int @id @default(autoincrement())
   currentAccount String
   mfi Int
   helpPhone String
   adsInPayments String?
}

model House {
  id Int @id @default(autoincrement())
  number String
  Street Street @relation(fields: [street], references: [id])
  street Int
  subscriberAccounts SubscriberAccount[]
}

model Street {
  id Int @id @default(autoincrement())
  name String @unique
  type String
  houseNumbers House[]
}

model SubscriberAccount{
  id Int @id @default(autoincrement())
  apartment Int
  subscriberAccount String @unique
  email String?
  birthday String?
  contract String @unique
  contractDate DateTime
  isLivingApartment Boolean
  residents Int
  period DateTime
  isRemovalHouseholdWaste Boolean
  utr String
  passport String
  surname String
  name String
  middleName String
  phone String
  additionalPhone String
  accountType String
  house Int
  House House @relation(fields: [house], references: [id])
}
